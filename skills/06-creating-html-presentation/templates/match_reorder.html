<section data-background="{{ slide.image }}" data-background-opacity="0.5" {% if slide.background_gradient %}
    data-background-gradient="{{ slide.background_gradient }}" {% endif %} data-auto-animate>

    <div
        style="display: grid; grid-template-columns: 1fr; gap: 20px; align-items: start; height: 100%; max-width: 1200px; margin: auto; text-align: left; padding-top: 20px;">

        <!-- Container -->
        <div
            style="padding: 10px; min-height: 60vh; display: flex; flex-direction: column; justify-content: flex-start;">

            {% if slide.badge %}
            <div data-id="task-badge">
                <h3
                    style="color: #FFD700; margin-bottom: 10px; font-size: 1.2em; border-bottom: 2px solid #FFD700; display: inline-block;">
                    {{ slide.badge }}</h3>
            </div>
            {% endif %}

            <h1 data-id="task-title"
                style="font-size: 1.2em; margin-bottom: 10px; line-height: 1.1; text-shadow: 2px 2px 4px black;">
                {{ slide.title }}
            </h1>

            {% if slide.rationale %}
            <div data-id="task-rationale"
                style="font-size: 0.8em; margin-bottom: 15px; color: #eee; font-style: italic; font-weight: 300;">
                <i class="fas fa-lightbulb" style="color: #FFD700; margin-right: 10px;"></i> {{ slide.rationale }}
            </div>
            {% endif %}

            <!-- Columns - GOLD STANDARD RATIO (350px / 1fr) -->
            <div style="display: grid; grid-template-columns: 350px 1fr; gap: 30px; font-size: 0.95em; align-items: center;">

                <!-- Left Column (The ones that move) -->
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    {% for item in slide.left_items %}
                    {% set text = item.text if item.text is defined else item %}
                    {% set color = item.color if item.color is defined else 'rgba(0, 77, 64, 0.9)' %}
                    {% set border = item.border if item.border is defined else 'var(--primary)' %}
                    {% set fg = item.fg if item.fg is defined else 'white' %}

                    <div data-id="left-{{ text }}"
                        style="padding: 15px; background: {{ color }}; border: 2px solid {{ border }}; border-radius: 8px; text-align: left; color: {{ fg }}; box-shadow: 4px 4px 10px rgba(0,0,0,0.3);">
                        {{ text }}
                    </div>
                    {% endfor %}
                </div>

                <!-- Right Column (Static Definitions) -->
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    {% for item in slide.right_items %}
                    {% set text = item.text if item.text is defined else item %}
                    {% set color = item.color if item.color is defined else 'rgba(30,30,30,0.8)' %}
                    {% set border = item.border if item.border is defined else 'rgba(255,255,255,0.2)' %}
                    {% set fg = item.fg if item.fg is defined else 'white' %}

                    <div data-id="right-{{ text }}" style="padding: 15px; 
                               background: {{ color }}; 
                               border: 1px solid {{ border }}; 
                               color: {{ fg }};
                               border-radius: 8px; text-align: left; line-height: 1.2;">
                        {{ text }}
                    </div>
                    {% endfor %}
                </div>

            </div>
        </div>
    </div>

    <aside class="notes">
        {{ slide.notes | default('Monitor student progress.') }}
    </aside>
</section>
